require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["vr/pdp/new-pdp"],[]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/vr-new-pdp","files":{"js-amd":{"src":{"vr":{"pdp":{"new-pdp":1}}}}},"_":{"baseUrl":"/"}});
define("ta/util/ajaxPreserves",["vanillajs"],function(){function e(e,n,r){if(r&&n&&e){var a=r.querySelectorAll(".ajax_preserve");if(a.length>0){var t={},l=n.querySelectorAll(".ajax_preserve, .ajax_preserve_noreplace");Array.prototype.forEach.call(l,function(e){var n=e.getAttribute("data-ajax-preserve");n&&(t[n]=e)}),Array.prototype.forEach.call(a,function(n){var r=t[n.getAttribute("data-ajax-preserve")];r&&e(r,n)})}}}var n={};return n.copy=e.bind(null,function(e,n){n.parentNode&&n.parentNode.replaceChild(e,n)}),n.innerCopy=e.bind(null,function(e,n){n.innerHTML=e.innerHTML}),n.replaceContent=function(e,r){for(n.copy(r,e),r.innerHTML="";e.childNodes.length>0;)r.appendChild(e.childNodes[0])},n.setContentElement=function(e,r,a){n.copy(e,r),a?e.parentNode&&e.parentNode.replaceChild(r,e):(e.innerHTML="",e.appendChild(r))},n});
define("mixins/Reviews",["lib/jquery-amd","utils/asdf-encoder","ta/common/Repoll","ta/util/ajaxPreserves","ta/Core/TA.Event","ta/util/Error","ta/prwidgets","utils/form-to-json"],function(e,t,i,o,a,n,r,s){"use strict";function l(t){var i=e(t.scrollDestination,t.reviews).filter(":visible");if(i.length){var o=i.offset().top-80,a=window.pageYOffset;e("html,body").animate({scrollTop:o},400,function(){window.pageYOffset==a&&window.scrollTo(0,o)})}}function f(t,i){t=t||{};var o=e(i.reviews),a=o.find(i.loadingContainer),n=a.find(i.loadingBox),r=0;t.whiteBoxTopElmt&&(r=e(t.whiteBoxTopElmt).offset().top-o.offset().top),a.css({top:r});var s=t.loadingBoxTopElmt;if(r="",s){s.substr&&s.match(/^[a-zA-Z]/)&&(s="#"+s);var l=e(s).offset(),f=o.offset();l&&f&&(r=l.top-f.top)}n.css({top:r}),o.addClass("loading")}function d(e){return e=e||{},e.reviews=e.reviews||"#REVIEWS",e.scrollDestination=e.scrollDestination||".filters_container, .search_box_container, .pagination-details, .review",e.loadingContainer=e.loadingContainer||".loadingContainer",e.loadingBox=e.loadingBox||".loadingBox",e.loadingClass=e.loadingClass||"loading",e}var p=function(c){function g(e,i){var o,a=e.getAttribute("href")||e.getAttribute("data-href");if(a)o=a;else{var r=e.getAttribute("data-page");if(!r)return void n.record(new Error("No href, data-href or data-page found in pagination element."),"Reviews.js _applyPaginationOffset");o=t.asdf(r)}var s=location.pathname!==o;if(s){if(f(i,c),!history.replaceState)return void setTimeout(function(){window.location.href=o},10);history.replaceState(history.state,document.title,o),l(c),y.setPageUrl(o),y.setOneTimeParams({},"REVIEW_LIST")}}function u(t,i){h=!0,f(i,c);var o=location.pathname.replace(/-or\d+/,""),a=location.pathname!==o;if(!history.replaceState&&a)return void t.submit();a&&(history.replaceState(history.state,document.title,o),y.setPageUrl(o));var n=s(e(t).get(0));y.setOneTimeParams(n,"REVIEW_LIST")}function v(t){var i=e(c.reviews),n=i.find(":focus");o.replaceContent(t,i.get(0)),i.removeClass(c.loadingClass),r.initWidgets(i.get(0)),n.closest(".ajax_preserve").length&&n.focus(),h=!1,a.fireEvent("reviewListUpdated",t)}function m(){e(c.reviews+"."+c.loadingClass).removeClass(c.loadingClass).empty(),h=!1}function w(){return h}c=d(c);var h=!1,y=new i({evaluateScripts:!0});a.on("page-repoll-failed",m),a.on("review-list-update",v),p.prototype.applyReviewFiltersForm=u,p.prototype.applyPaginationOffset=g,p.prototype.isRefreshingReview=w};return p});
define("vr/pdp/new-pdp",["mixins/mixin","mixins/Reviews","mobile/lite/image-loader"],function(i,e,n){"use strict";function t(t){var r=t.remarketingOptions;return r&&localStorage.setItem("VacationRentalRemarketingOptions",JSON.stringify(r)),i(this||{},new e),n.init(200),this}return{init:t}});
