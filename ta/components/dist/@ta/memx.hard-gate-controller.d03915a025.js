($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/memx.hard-gate-controller",d:["vendor-babel","vendor-react-libs","ta-platform","lithium-platform","@ta/common.localstorage","@ta/memx.detail-page-review-info","vendor-redux-libs","@ta/memx.registration-dialog-utils"],e:["./packages/memx/hard-gate-controller/hard-gate-controller.jsx"],x:{"./packages/memx/hard-gate-controller/hard-gate-controller.jsx":["PAGE_VIEWED_KEY","PAGE_COUNT_TRIGGER","default"]},m:{"./packages/memx/hard-gate-controller/hard-gate-controller.jsx":function(e,t,a){"use strict";a.r(t);var _=a("@babel/runtime/helpers/esm/slicedToArray"),l=a.n(_),n=a("react"),i=a.n(n),o=a("@ta/common.error-handling"),r=a("@ta/common.features"),c=a("@ta/common.localstorage"),s=a.n(c),b=a("@ta/memx.detail-page-review-info"),g=a.n(b),m=a("react-redux"),d=a("@ta/common.i18n"),u=a("@ta/platform.import"),p=a("@ta/memx.registration-dialog-utils"),O=Object(u.deferredImport)("@ta/memx.gating-overlays","MobileGateOverlay"),j=Object(u.deferredImport)("@ta/memx.gating-overlays","GateRedesignSignIn"),v=Object(u.deferredImport)("@ta/memx.gating-overlays","GateRedesignPhotoNarrow"),h=Object(u.deferredImport)("@ta/memx.gating-overlays","GateRedesignPhoneFrame"),E=Object(u.deferredImport)("@ta/memx.gating-overlays","GateRedesignPhotoWide"),w="memx_mobile_hardgate_pageview",f=Object(r.featureIsEnabled)("pageview_counter_hard_gate_ghost")||Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_ghost")||Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_ghost")||Object(r.featureIsEnabled)("signup_gate_2pv_mw_ghost")||Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_ab_ghost")||Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_cd_ghost")||Object(r.featureIsEnabled)("signup_gate_2pv_mw_c_ghost")||Object(r.featureIsEnabled)("hard_gate_google_one_tap_2pv_mw_ghost"),I=Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_a")||Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_b")||Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_c")||Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_d")||Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_e"),z=function e(){return Object(r.featureIsEnabled)("signup_gate_2pv_mw_test")?40623:Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_test")?40630:40620},y=function e(t){if(Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_b"))return p.RESTAURANTS_SERVLETS.includes(t)?63649:63648;if(Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_c"))return 63635;if(Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_d"))return 63650;switch(t){case"MobileAttraction_Review":return 63627;case"MobileAttractions":return 63628;case"MobileShowUserReviews":return 63629;case"Hotel_Review":return 63630;case"MobileRestaurantSearch":return 63631;case"Restaurant_Review":return 63632;case"MobileRestaurants":return 63633;case"MobileRestaurantsNear":return 63634;default:return null}},S=function e(){window.require(["ta/registration/RegOverlay"],function(e){e.showRegOverlay(null,null,!0,{flow:"CORE_COMBINED",pid:z(),userRequestedForce:"true",extraQueryParams:{flowOrigin:"join"}})})},x=Object(m.connect)(function(e){var t;return{isMember:e.auth.isMember,servlet:e.meta.initialServletName,servletIsShowUserReviewsAttractions:"/ShowUserReviewsAttractions"===(null===(t=e.tracking.analytics)||void 0===t?void 0:t.url)}})(function e(t){var a=t.isMember,_=t.servlet,n=t.servletIsShowUserReviewsAttractions,o=Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_b")&&p.RESTAURANTS_SERVLETS.includes(_),c=function e(t){return Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_a")?[Object(d.localize)("native_onboarding_enable_notifications_be_in_the_know"),Object(d.localize)("memx_apphardgate_1"),63299,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_b")?[Object(d.localize)("memx_apphardgate_3"),null,63299,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_c")?[Object(d.localize)("memx_apphardgate_5"),Object(d.localize)("memx_apphardgate_6"),63299,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_d")?[Object(d.localize)("native_onboarding_enable_notifications_be_in_the_know"),Object(d.localize)("memx_apphardgate_7"),63299,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_copy_test_e")?[Object(d.localize)("memx_apphardgate_8"),Object(d.localize)("memx_apphardgate_9"),63299,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_3s_app_redirect")?[Object(d.localize)("MEMX771_1"),Object(d.localize)("MEMX771_2"),63299,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_a")?[Object(d.localize)("MEMX920_7"),Object(d.localize)("MEMX920_8"),63488,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_b")?[Object(d.localize)("MEMX920_42"),[Object(d.localize)("MEMX920_2")],63489,null]:Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_c")?[Object(d.localize)("MEMX920_3"),Object(d.localize)("MEMX920_4"),63490,null]:Object(r.featureIsEnabled)("signup_gate_2pv_mw_a")||Object(r.featureIsEnabled)("signup_gate_2pv_mw_c")?p.HOTEL_SERVLETS.includes(t)?[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_hotels_on_a_map"),Object(d.localize)("mobile_gate_get_hotel_alerts")],null,"/img2/memx/photo-hotels.jpg"]:p.ATTRACTIONS_SERVLETS.includes(t)?[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_things_on_a_map"),Object(d.localize)("mobile_gate_24_hour_cancellation")],null,"/img2/memx/photo-attractions.jpg"]:p.RESTAURANTS_SERVLETS.includes(t)?[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_restaurant_ideas"),Object(d.localize)("mobile_gate_view_restaurants_on_a_map")],null,"/img2/memx/photo-restaurants.jpg"]:[Object(d.localize)("mobile_gate_signin_for_best_tripadvisor"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_trip_on_a_map"),Object(d.localize)("mobile_gate_get_hotel_flight_alerts")],null,"/img2/memx/photo-generic.jpg"]:Object(r.featureIsEnabled)("signup_gate_2pv_mw_b")?p.HOTEL_SERVLETS.includes(t)?[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_hotels_on_a_map"),Object(d.localize)("mobile_gate_get_hotel_alerts")],null,"/img2/memx/photo-hotels.jpg"]:p.ATTRACTIONS_SERVLETS.includes(t)?[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_save_great_things_in_one_place"),Object(d.localize)("mobile_gate_save_travel_on_a_map"),Object(d.localize)("mobile_gate_access_saves_wherever")],null,"/img2/memx/photo-attractions.jpg"]:p.RESTAURANTS_SERVLETS.includes(t)?[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_restaurant_ideas"),Object(d.localize)("mobile_gate_view_restaurants_on_a_map")],null,"/img2/memx/photo-restaurants.jpg"]:[Object(d.localize)("mobile_gate_signin_keep_planning"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_trip_on_a_map"),Object(d.localize)("mobile_gate_get_hotel_flight_alerts")],null,"/img2/memx/photo-generic.jpg"]:Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_test")?p.HOTEL_SERVLETS.includes(t)?[Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_d")?Object(d.localize)("memx_gating_mw_signin_or_appdl"):Object(d.localize)("memx_gating_mw_appal_or_signin"),[Object(d.localize)("memx_gating_mw_hotel_values")],y(t),"/img2/memx/photo-hotels.jpg"]:p.ATTRACTIONS_SERVLETS.includes(t)?[Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_d")?Object(d.localize)("memx_gating_mw_signin_or_appdl"):Object(d.localize)("memx_gating_mw_appal_or_signin"),[Object(d.localize)("memx_gating_mw_attraction_values")],y(t),"/img2/memx/photo-attractions.jpg"]:p.RESTAURANTS_SERVLETS.includes(t)?Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_b")?[Object(d.localize)("MEMX771_1"),Object(d.localize)("MEMX771_2"),y(t),null]:[Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_d")?Object(d.localize)("memx_gating_mw_signin_or_appdl"):Object(d.localize)("memx_gating_mw_appal_or_signin"),[Object(d.localize)("memx_gating_mw_restaurant_values")],y(t),"/img2/memx/photo-restaurants.jpg"]:[Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_d")?Object(d.localize)("memx_gating_mw_signin_or_appdl"):Object(d.localize)("memx_gating_mw_appal_or_signin"),[Object(d.localize)("memx_gating_mw_generic_value")],y(t),"/img2/memx/photo-generic.jpg"]:Object(r.featureIsEnabled)("hard_gate_google_one_tap_2pv_mw")?[Object(d.localize)("mobile_gate_signin_for_best_tripadvisor"),[Object(d.localize)("mobile_gate_see_reviews_travelers_like_you"),Object(d.localize)("mobile_gate_save_trip_on_a_map"),Object(d.localize)("mobile_gate_get_hotel_flight_alerts")],null,"/img2/memx/photo-generic.jpg"]:[Object(d.localize)("memx_onboarding_unlock_TA"),Object(d.localize)("subhead_plan_right_for_you_free_app"),63299,null]}(_),s=l()(c,4),b=s[0],g=s[1],m=s[2],u=s[3],z=Object(r.featureIsEnabled)("hard_gate_2nd_pv_3s_app_redirect")||o?[!1,!0]:[!0,!1],x=l()(z,2),R=x[0],M=x[1];return a&&!I?null:(Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_a")||Object(r.featureIsEnabled)("hybrid_gate_4pv_mw_a")||Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_b"))&&"MobileShowUserReviews"===_&&!n?null:Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_a")?i.a.createElement(v,{headline:b,secondary:g,isControl:f,mcid:m,name:w,totalViews:T}):Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_b")?i.a.createElement(h,{mcid:m,name:w,isControl:f,headline:b,secondary:g,totalViews:T,downloadOption:!0}):Object(r.featureIsEnabled)("hard_gate_2nd_pv_new_variant_c")?i.a.createElement(E,{mcid:m,name:w,isControl:f,headline:b,secondary:g,totalViews:T}):Object(r.featureIsEnabled)("signup_gate_2pv_mw_b")&&p.ATTRACTIONS_SERVLETS.includes(_)?i.a.createElement(h,{mcid:m,name:w,isControl:f,headline:b,secondary:g,totalViews:T,onSignIn:S,isCheckmarkVersion:!0,signInOption:!0,downloadOption:!1,topSnippet:Object(d.localize)("mobile_gate_signin_continue_tripadvisor")}):Object(r.featureIsEnabled)("signup_gate_2pv_mw_test")?i.a.createElement(j,{name:w,isControl:f,topSnippet:Object(d.localize)("mobile_gate_signin_continue_tripadvisor"),imagePath:u,headline:b,secondary:g,isCheckmarkVersion:!0,totalViews:T,onSignIn:S}):o?i.a.createElement(O,{downloadOption:!0,isControl:f,mcid:m,totalViews:T,name:w,signInOption:R&&!I,onSignIn:S,headline:b,secondary:g,topSnippet:null,redirect:M}):Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_test")?i.a.createElement(j,{name:w,isControl:f,imagePath:u,headline:b,secondary:g,totalViews:T,onSignIn:S,mcid:m,signInOption:!0,downloadOption:!0,downloadButtonFirst:!Object(r.featureIsEnabled)("hybrid_gate_2pv_mw_d"),signInButtonMessage:Object(d.localize)("memx_gating_mw_hybrid")}):Object(r.featureIsEnabled)("hard_gate_google_one_tap_2pv_mw")?i.a.createElement(j,{name:w,isControl:f,imagePath:u,headline:b,secondary:g,totalViews:T,onSignIn:S,mcid:m,signInOption:!0,signInButtonMessage:Object(d.localize)("memx_gating_mw_hybrid"),showBehindRegDialog:!0,isCheckmarkVersion:!0}):i.a.createElement(O,{downloadOption:!0,isControl:f,mcid:m,totalViews:T,name:w,signInOption:R&&!I,onSignIn:S,headline:b,secondary:g,topSnippet:null,redirect:M})});a.d(t,"PAGE_VIEWED_KEY",function(){return R}),a.d(t,"PAGE_COUNT_TRIGGER",function(){return T});var R="hardGatePageViewCount",T=Object(r.featureIsEnabled)("hybrid_gate_4pv_mw_a")?4:2;t.default=function e(){var t=Object(n.useState)(!0),a=l()(t,2),_=a[0],r=a[1],c=Object(n.useState)(null),b=l()(c,2),m=b[0],d=b[1];return Object(n.useEffect)(function(){null===m&&d(function e(){var t=parseInt(s.a.get(R),10),a=isNaN(t)?1:t+1;return s.a.set(R,a,18e5),a}()),r(null===m||m<T)},[m]),_?null:i.a.createElement(o.ErrorBoundary,null,i.a.createElement(g.a,null,function(e){var t,a=e.data,_=void 0===a?{}:a;return function e(t){var a;return(null==t?void 0:t.hasSensitiveIssues)||(null==t?void 0:null===(a=t.reviewSummary)||void 0===a?void 0:a.alertStatusCount)>0}(null==_?void 0:null===(t=_.locations)||void 0===t?void 0:t[0])?null:i.a.createElement(x,null)}))}}}});
//# sourceMappingURL=memx.hard-gate-controller.d03915a025.js.map