($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/trips.tracking",d:["@ta/trips.trip-types","@ta/trips.trip-util","vendor-babel","vendor-react-libs","vendor-apollo-libs","ta-platform","@ta/tracking.interactions","ta-common"],e:["./packages/trips/tracking/index.jsx"],x:{"./packages/trips/tracking/index.jsx":["TripInteraction","getInteractionsContext","SaveSessionTrackingContext","SaveSessionProvider","OrganizeSessionTrackingContext","OrganizeSessionProvider","getTripsHomeImpression","getTripsDetailImpression","getTripsImpression"]},m:{"./packages/trips/tracking/index.jsx":function(e,t,i){"use strict";i.r(t),i("@ta/trips.trip-types");var r=i("@ta/trips.trip-util"),n={alltrips:"ALL",publictrips:"PUBLIC",privatetrips:"PRIVATE"},s=function e(t,i){return{tripsHome:{hasTrips:t&&t.length>0,filter:n[i]||"ALL"}}},o=function e(t){var i;i=t.owner&&t.owner.isMe?"OWNER":Object(r.isTripUser)(t)?"COLLABORATOR":"VIEWER";var n=t.status||void 0;return{tripsDetail:{tripId:t.id,status:n,relation:i,collaborative:!!t.collaborators&&t.collaborators.length>0}}},a=function e(t){var i=t.element,r=t.trip,n=t.trips,s=t.item,o=n?!!(n.length>0):void 0,a=r&&void 0!==o?function e(t,i){return i?t?t&&t.owner&&!t.owner.isMe?"COLLABORATOR":t&&t.collaborators&&t.collaborators.length>0?"COLLABORATED":"EXISTING":"NEW":"FIRST"}(r,o):void 0;return{trips:{element:i,tripId:r&&r.id,tripType:a,hasTrips:o,dated:r&&!!r.date&&(!!r.date.to||!!r.date.from||!!r.date.duration),isSaved:s&&s.saved}}},c=i("@babel/runtime/helpers/esm/defineProperty"),u=i.n(c),l=i("@babel/runtime/helpers/esm/objectSpread"),d=i.n(l),p=i("react"),v=i("react-apollo"),f=i("@ta/common.tracking"),m=i("@ta/tracking.interactions"),O=i("@ta/common.routing"),g=i("@ta/common.string"),S={sessionUuid:Object(g.uuid)(),sessionOrder:0,incrementOrder:function e(){}},C=p.createContext(S),k={sessionUuid:Object(g.uuid)(),sessionOrder:0,incrementOrder:function e(){},resetSession:function e(){}},R=p.createContext(k),w={Home:"HomeFeed",Profile:"ProfileFeed",Attractions:"AttractionList",Attraction_Review:"AttractionDetail",Attraction_Products:"AttractionList",AttractionProductDetail:"AttractionProductDetail",Hotels:"HotelList",SmartDeals:"HotelList",HotelHighlight:"HotelList",HotelsList:"HotelList",HotelsNear:"HotelList",Vacation_Packages:"HotelList",Hotel_Review:"HotelDetail",Restaurants:"RestaurantList",Restaurant_Review:"RestaurantDetail",ShowUserReviews:"ShowUserReview",ShowUserReviewsHotels:"ShowUserReview",ShowUserReviewsRestaurants:"ShowUserReview",ShowUserReviewsAttractions:"ShowUserReview",Recent:"Recent",Forums:"Forums",ShowTopic:"Forums",ShowForum:"Forums",Trips:"Trips",Map:"Map",LastMinute:"HotelList",LocalMaps:"Map",LocalMapsRedesign:"Map",VacationRentalReview:"VacationRentalDetail"},T=function e(t){return t&&w[t]?w[t].toUpperCase():void 0},U=function e(t){return t&&(T(t)||T(t.replace(/^Mobile/,"")))},h=function e(t){var i=t.children,r=t.source,n=t.pageAsContext,s=t.saveObject,o=t.trackingContext,a=t.withSaveSession,c=t.withOrganizeSession,l=p.useContext(O.RouteContext).route,g=p.useContext(C),S=g.sessionUuid,k=g.sessionOrder,w=g.incrementOrder,T=p.useContext(R),h=T.sessionUuid,x=T.sessionOrder,b=T.incrementOrder;return p.createElement(f.TrackingImpressionContext,null,function(e){var t,f=e.impressionId||"",O=o||n&&l&&l.page||void 0,g={detailId:s?"".concat(s.id):void 0,saveType:s?s.type:void 0};return a?t={sessionType:"SAVE",sessionUuid:S,sessionOrder:k}:c&&(t={sessionType:"ORGANIZE",sessionUuid:h,sessionOrder:x}),p.createElement(v.Mutation,{mutation:m.LogInteractionV4,ignoreResults:!0},function(e){return i(function(i,n){a?w():c&&b(),n&&(g={detailId:"".concat(n.id),saveType:n.type});var s={elementClick:i.elementClick&&d()({puid:f},g,{context:O},t,i.elementClick),filterClick:i.filterClick&&d()({puid:f},i.filterClick),modalSuccess:i.modalSuccess&&d()({puid:f},g,{context:O},t,i.modalSuccess),overflowClick:i.overflowClick&&d()({puid:f},i.overflowClick,t),overflowSuccess:i.overflowSuccess&&d()({puid:f},i.overflowSuccess),linkReferenceClick:i.linkReferenceClick&&d()({puid:f},i.linkReferenceClick)},o=u()({},r,function l(e){var t=e;return["elementClick","modalSuccess"].forEach(function(e){t[e]&&t[e].context&&(t[e].context=U(t[e].context)||null),t[e]&&t[e].saveType&&(t[e].saveType=t[e].saveType.toUpperCase()),t[e]&&t[e].action&&(t[e].action=t[e].action.toUpperCase())}),["elementClick","filterClick","modalSuccess","overflowClick","overflowSuccess"].forEach(function(e){t[e]&&t[e].element&&(t[e].element=t[e].element.toUpperCase())}),["modalSuccess"].forEach(function(e){t[e]&&t[e].fields&&(t[e].fields=t[e].fields.map(function(e){return e.toUpperCase()}))}),t}(s));return e({variables:{interaction:o}})},f)})})};h.defaultProps={pageAsContext:!1,saveObject:void 0,trackingContext:void 0};var x=h,b=i("@babel/runtime/helpers/esm/slicedToArray"),L=i.n(b),I=function e(t){var i=t.children,r=p.useState(function(){return{sessionUuid:Object(g.uuid)(),sessionOrder:0}}),n=L()(r,2),s=n[0],o=n[1],a=function e(){return o(function(e){return{sessionUuid:e.sessionUuid,sessionOrder:e.sessionOrder+1}})};return p.createElement(C.Provider,{value:{sessionUuid:s.sessionUuid,sessionOrder:s.sessionOrder,incrementOrder:a}},i(s,function e(){return o({sessionUuid:Object(g.uuid)(),sessionOrder:0})},a))},A=function e(t){var i=t.children,r=p.useState(function(){return{sessionUuid:Object(g.uuid)(),sessionOrder:0}}),n=L()(r,2),s=n[0],o=n[1],a=function e(){return o(function(e){return{sessionUuid:e.sessionUuid,sessionOrder:e.sessionOrder+1}})},c=function e(){return o({sessionUuid:Object(g.uuid)(),sessionOrder:0})};return p.createElement(R.Provider,{value:{sessionUuid:s.sessionUuid,sessionOrder:s.sessionOrder,incrementOrder:a,resetSession:c}},i(s,c,a))};i.d(t,"getTripsHomeImpression",function(){return s}),i.d(t,"getTripsDetailImpression",function(){return o}),i.d(t,"getTripsImpression",function(){return a}),i.d(t,"TripInteraction",function(){return x}),i.d(t,"getInteractionsContext",function(){return U}),i.d(t,"SaveSessionTrackingContext",function(){return C}),i.d(t,"SaveSessionProvider",function(){return I}),i.d(t,"OrganizeSessionTrackingContext",function(){return R}),i.d(t,"OrganizeSessionProvider",function(){return A})}}});
//# sourceMappingURL=trips.tracking.b5fdb37ea8.js.map