($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/common.captcha",d:["vendor-babel","vendor-react-libs","lithium-platform","ta-common","vendor-redux-libs"],e:["./packages/common/captcha/captcha.jsx"],x:{"./packages/common/captcha/captcha.jsx":["Recaptcha","Geetest","Captchas"],"./packages/common/captcha/internal/Gee.jsx":["a"],"./packages/common/captcha/internal/Recaptcha.jsx":["a"],"./packages/common/captcha/internal/StableId.jsx":["a"]},m:{"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./packages/common/captcha/captcha.jsx":function(e,t,n){"use strict";n.r(t);var a=n("./packages/common/captcha/internal/Recaptcha.jsx"),c=n("./packages/common/captcha/internal/Gee.jsx"),r=n("react"),s=n("react-redux"),i=Object(s.connect)(function(e){var t,n,a,c;return{siteKey:null===(t=e.auth.captcha)||void 0===t?void 0:t.captchaSiteKey,language:null===(n=e.auth.captcha)||void 0===n?void 0:n.recaptchaLang,useRecaptcha:null===(a=e.auth.captcha)||void 0===a?void 0:a.needsRecaptcha,useGeetest:null===(c=e.auth.captcha)||void 0===c?void 0:c.needsGeetest}})(function e(t){var n=t.useRecaptcha,s=t.useGeetest,i=t.siteKey,l=t.language,o=t.children;return n||s?r.createElement(r.Fragment,null,n&&i&&l&&o&&r.createElement(a.a,{siteKey:i,language:l},o),s&&i&&o&&r.createElement(c.a,{siteKey:i},o)):null});n.d(t,"Recaptcha",function(){return a.a}),n.d(t,"Geetest",function(){return c.a}),n.d(t,"Captchas",function(){return i})},"./packages/common/captcha/internal/Gee.jsx":function(e,t,n){"use strict";(function(e){var a=n("@babel/runtime/helpers/esm/extends"),c=n.n(a),r=n("@babel/runtime/helpers/esm/classCallCheck"),s=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),u=n.n(o),p=n("@babel/runtime/helpers/esm/getPrototypeOf"),h=n.n(p),m=n("@babel/runtime/helpers/esm/inherits"),d=n.n(m),b=n("@babel/runtime/helpers/esm/assertThisInitialized"),f=n.n(b),v=n("@babel/runtime/helpers/esm/defineProperty"),g=n.n(v),y=n("react"),k=n("@ta/common.i18n"),I=n("./packages/common/captcha/internal/StableId.jsx"),j=function(t){function n(){var t,a;s()(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return a=u()(this,(t=h()(n)).call.apply(t,[this].concat(r))),g()(f()(f()(a)),"state",{challenge:"",seccode:"",validate:""}),g()(f()(f()(a)),"show",function(){e.require(["trjs!ta/util/GeeTest"],function(e){e.reset(a.elemId),e.init(">>> ".concat(Object(k.localize)("geetest_slide_to_verify")," >>>"),"float"),e.showSync(a.props.siteKey,a.elemId).then(function(e){return a.setState({challenge:e.challenge,seccode:e.seccode,validate:e.validate})})})}),g()(f()(f()(a)),"elemId",void 0),a}return d()(n,t),l()(n,[{key:"componentDidMount",value:function e(){this.show()}},{key:"render",value:function e(){var t=this.props,n=t.uniqueId,a=t.siteKey,c=t.children;return this.elemId="gee-".concat(n),y.createElement(y.Fragment,null,c({challenge:this.state.challenge,seccode:this.state.seccode,validate:this.state.validate},this.show),y.createElement("div",null,Object(k.localize)("captcha_50f")),y.createElement("div",{id:this.elemId,"data-captcha-id":a,"data-captcha-type":"float"}))}}]),n}(y.Component);t.a=function e(t){return y.createElement(I.a,null,function(e){return y.createElement(j,c()({},t,{uniqueId:e}))})}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./packages/common/captcha/internal/Recaptcha.jsx":function(e,t,n){"use strict";(function(e){var a=n("@babel/runtime/helpers/esm/extends"),c=n.n(a),r=n("@babel/runtime/helpers/esm/classCallCheck"),s=n.n(r),i=n("@babel/runtime/helpers/esm/createClass"),l=n.n(i),o=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),u=n.n(o),p=n("@babel/runtime/helpers/esm/getPrototypeOf"),h=n.n(p),m=n("@babel/runtime/helpers/esm/inherits"),d=n.n(m),b=n("@babel/runtime/helpers/esm/assertThisInitialized"),f=n.n(b),v=n("@babel/runtime/helpers/esm/defineProperty"),g=n.n(v),y=n("react"),k=n("@ta/common.i18n"),I=n("./packages/common/captcha/internal/StableId.jsx"),j=function(t){function n(){var t,a;s()(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return a=u()(this,(t=h()(n)).call.apply(t,[this].concat(r))),g()(f()(f()(a)),"state",{token:""}),g()(f()(f()(a)),"onResponse",function(e){a.props.onResponse&&a.props.onResponse(e),a.setState({token:e})}),g()(f()(f()(a)),"resetCaptcha",function(){e.require(["trjs!ta/util/ReCaptcha"],function(e){e.reset(a.elemId)})}),g()(f()(f()(a)),"elemId",void 0),g()(f()(f()(a)),"inputId",void 0),a}return d()(n,t),l()(n,[{key:"componentDidMount",value:function t(){var n=this;e.require(["trjs!ta/util/ReCaptcha"],function(e){if(e.checkCaptchaRendered(n.elemId))e.reset(n.elemId);else{var t=function t(){return e.show(n.props.siteKey,n.elemId,n.inputId,n.props.compact,!1,n.onResponse,null)};e.checkGrecaptcha()?t():(window.recaptchaCallback=t,e.init(n.props.language,Object(k.localize)("reg_error_reload"),n.elemId,n.inputId))}})}},{key:"render",value:function e(){var t=this.props,n=t.uniqueId,a=t.children;return this.elemId="captcha-".concat(n),this.inputId="captcha-input-".concat(n),y.createElement(y.Fragment,null,a&&a({token:this.state.token},this.resetCaptcha),y.createElement("div",{id:this.elemId}),y.createElement("input",{id:this.inputId,type:"hidden"}))}}]),n}(y.Component);t.a=function e(t){return y.createElement(I.a,null,function(e){return y.createElement(j,c()({},t,{uniqueId:e}))})}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./packages/common/captcha/internal/StableId.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n("@babel/runtime/helpers/esm/classCallCheck"),c=n.n(a),r=n("@babel/runtime/helpers/esm/createClass"),s=n.n(r),i=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=n.n(i),o=n("@babel/runtime/helpers/esm/getPrototypeOf"),u=n.n(o),p=n("@babel/runtime/helpers/esm/inherits"),h=n.n(p),m=n("@babel/runtime/helpers/esm/assertThisInitialized"),d=n.n(m),b=n("@babel/runtime/helpers/esm/defineProperty"),f=n.n(b),v=n("react"),g=n("@ta/common.string"),y=function(e){function t(){var e,n;c()(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return n=l()(this,(e=u()(t)).call.apply(e,[this].concat(r))),f()(d()(d()(n)),"state",{unique:null}),f()(d()(d()(n)),"elem",v.createRef()),n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function e(){this.setState({unique:this.elem.current&&this.elem.current.dataset.unique||Object(g.uuid)()})}},{key:"render",value:function e(){var t=this.state.unique;return v.createElement("div",{ref:this.elem,"data-unique":t},null!==t&&this.props.children(t))}}]),t}(v.Component)}}});
//# sourceMappingURL=common.captcha.ade0cbe5c0.js.map