($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/memx.ta-twotap",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","@ta/social.onboarding-state","lithium-platform","ta-platform","@ta/overlays.pieces","@ta/memx.registration-dialog-utils","@ta/social.onboarding-utils"],e:["./packages/memx/ta-twotap/TaTwoTapLoader.jsx"],x:{"./packages/memx/ta-twotap/TaTwoTapLoader.jsx":["default"]},m:{"./packages/memx/ta-twotap/TaTwoTapLoader.jsx":function(e,a,t){"use strict";t.r(a);var o=t("@babel/runtime/helpers/esm/classCallCheck"),s=t.n(o),i=t("@babel/runtime/helpers/esm/createClass"),r=t.n(i),n=t("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=t.n(n),p=t("@babel/runtime/helpers/esm/getPrototypeOf"),c=t.n(p),d=t("@babel/runtime/helpers/esm/inherits"),m=t.n(d),u=t("@babel/runtime/helpers/esm/assertThisInitialized"),b=t.n(u),_=t("@babel/runtime/helpers/esm/defineProperty"),T=t.n(_),g=t("react"),v=t("react-redux"),h=t("@ta/social.onboarding-state"),w=t("@ta/common.classnames"),f=t.n(w),O=t("@ta/common.cdn"),E=t("@ta/overlays.pieces"),S=t("@ta/common.i18n"),x=t("@ta/common.features"),j=t("@ta/common.tracking"),k=t.n(j),C=t("@ta/memx.registration-dialog-utils"),y=t("@ta/social.onboarding-utils"),A=Object(y.isHomePageMemberGateRegSplashExpSuasTest)()?"SIGN_UP_AND_SAVE":"CORE_COMBINED",M=function(e){function a(e){var t;return s()(this,a),t=l()(this,c()(a).call(this,e)),T()(b()(b()(t)),"getEnabledMapping",function(){return Object(y.isHomePageMemberGateRegSplashExpSuasTest)()&&Object(x.featureIsEnabled)("homepage_member_gate_suas_1")?{servlet_mapping:[],fallback:{headline:Object(S.localize)("HPSplash_SUAS_Copy1_HL"),subhead:Object(S.localize)("HPSplash_SUAS_Subhead1")}}:Object(y.isHomePageMemberGateRegSplashExpSuasTest)()&&Object(x.featureIsEnabled)("homepage_member_gate_suas_2")?{servlet_mapping:[],fallback:{headline:Object(S.localize)("HPSplash_SUAS_Copy2_HL"),subhead:Object(S.localize)("HPSplash_SUAS_Subhead2")}}:{servlet_mapping:[],fallback:{headline:Object(S.localize)("onetap_message_unlock"),subhead:Object(S.localize)("onetap_subhead_signin_alerts_deals")}}}),T()(b()(b()(t)),"resolveContextualMessages",function(e){var a=t.getEnabledMapping(),o=a.servlet_mapping.find(function(a){return a.servlets.includes(e)});return o&&o.messages||a.fallback}),T()(b()(b()(t)),"dismissTwoTap",function(){t.disableTwoTap(),t.trackAction("tripadvisor_twotap_closed"),t.props.onDismiss()}),T()(b()(b()(t)),"disableTwoTap",function(){t.state.disabled||(t.setState({disabled:!0}),Object(C.moveAdCloseX)(!0))}),T()(b()(b()(t)),"openRegOverlay",function(){t.trackAction("tripadvisor_twotap_click"),window.require(["ta/registration/RegOverlay"],function(e){var a="MOBILE"===t.props.viewportCategory;e.showRegOverlay(null,null,a,{flow:A,pid:40563,userRequestedForce:"true",extraQueryParams:{flowOrigin:"join"},onSuccess:function e(a){a&&a.user_id&&(Object(y.isHomePageMemberGateRegSplashExpSuasTest)()&&Object(y.setSuasPromoReceived)(),t.disableTwoTap(),"Home"!==t.props.servlet?Object(x.featureIsEnabled)("app_dl_for_got_and_fbot")&&t.props.setShouldFire(!1,"TA_TWOTAP_NON_HOME"):t.props.setShouldFire(!1,"TA_TWOTAP"))},onClose:function e(a){void 0!==a.trigger&&"doc-click"===a.trigger||t.dismissTwoTap()}})})}),t.state={disabled:t.isTaTwoTapDisabled()},t}return m()(a,e),r()(a,[{key:"componentWillMount",value:function e(){this.state.disabled&&this.props.triggerNext()}},{key:"componentDidMount",value:function e(){this.state.disabled||this.trackAction("tripadvisor_twotap_displayed")}},{key:"componentWillUnmount",value:function e(){this.disableTwoTap()}},{key:"isTaTwoTapDisabled",value:function e(){return!(Object(x.featureIsEnabled)("tripadvisor_two_tap_hotel_servlets")||!C.HOTEL_SERVLETS.includes(this.props.servlet))||!(Object(x.featureIsEnabled)("tripadvisor_two_tap_mobile_adhesion")||!Object(x.featureIsEnabled)("mobile_fixed_ad"))||!Object(x.featureIsEnabled)("tripadvisor_two_tap_mobile")&&!Object(x.featureIsEnabled)("tripadvisor_two_tap_desktop")}},{key:"trackAction",value:function e(a){k()({module:"tripadvisor_twotap",action:a,context:"".concat(this.props.servlet||"unknown")})}},{key:"render",value:function e(){if(this.state.disabled)return null;var a,t=this.resolveContextualMessages(this.props.servlet);return this.props.adhesionRendered?(a=50,Object(C.moveAdCloseX)(!1)):a=0,g.createElement("div",{className:"MOBILE"===this.props.viewportCategory?f()("memx-ta-twotap-TaTwoTapLoader__taTwoTapMessageContainer--OsbC4","memx-ta-twotap-TaTwoTapLoader__taTwoTapMessageMobileDevice--1Y8Fk"):f()("memx-ta-twotap-TaTwoTapLoader__taTwoTapMessageContainer--OsbC4","memx-ta-twotap-TaTwoTapLoader__taTwoTapMessageDesktopTablet--2g1_x"),style:{bottom:"".concat("MOBILE"===this.props.viewportCategory?"".concat(a,"px"):"unset")}},g.createElement(E.CloseX,{close:this.dismissTwoTap}),g.createElement("div",{className:"memx-ta-twotap-TaTwoTapLoader__taTwoTapMessageInnerContainer--1q1qJ"},g.createElement("div",{className:"memx-ta-twotap-TaTwoTapLoader__headline--1Em0s"},g.createElement(O.CdnImage,{src:"/img2/branding/rebrand/TA_Ollie.svg",alt:"TripAdvisor",className:"memx-ta-twotap-TaTwoTapLoader__taTwoTapIcon--DJlhj"}),g.createElement("div",null,t.headline)),g.createElement("p",{className:"memx-ta-twotap-TaTwoTapLoader__subhead--2Er7G"},t.subhead)),g.createElement("div",{className:"memx-ta-twotap-TaTwoTapLoader__loginButtonContainer--AvZAw"},g.createElement("div",{className:"ui_button primary ".concat("memx-ta-twotap-TaTwoTapLoader__loginButton--2Q9k7"),onClick:this.openRegOverlay},Object(x.featureIsEnabled)("daodao_unify_nav_links_title")?Object(S.localize)("reg_and_join"):Object(S.localize)("utility_nav_join"))))}}]),a}(g.Component);a.default=Object(v.connect)(function(e){return{servlet:e.meta.initialServletName,viewportCategory:e.meta.device.viewportCategory}},{setShouldFire:h.ACTIONS.setShouldFire})(M)}}});
//# sourceMappingURL=memx.ta-twotap.4b527393eb.js.map