($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/platform.runtime",se:!0,d:["vendor-babel","vendor-react-libs","vendor-redux-libs","ta-platform","lithium-platform","@ta/platform.sentry"],e:["./packages/platform/runtime/runtime.jsx"],m:{"./packages/platform/runtime/runtime.jsx":function(e,t,n){"use strict";n.r(t);var r=n("@babel/runtime/helpers/esm/toConsumableArray"),a=n.n(r),o=n("react"),i=n.n(o),l=n("react-dom"),u=n("react-redux"),c=n("@ta/common.api"),s=n("@ta/common.error-handling"),m=n("@ta/common.features"),d=n("@ta/common.global"),f=n("@ta/platform.urql"),p=n("@ta/common.i18n"),b=n("@ta/common.logging"),h=n.n(b),g=n("@ta/platform.performance"),E=n("@ta/common.routing"),O=n("@ta/common.state"),j=n("@ta/common.tracking"),v=n.n(j),y=n("@ta/platform.import"),C=n.n(y),P=n("@ta/platform.sentry");n("@babel/runtime/helpers/esm/classCallCheck"),n("@babel/runtime/helpers/esm/createClass"),n("@babel/runtime/helpers/esm/possibleConstructorReturn"),n("@babel/runtime/helpers/esm/getPrototypeOf"),n("@babel/runtime/helpers/esm/inherits"),n("@babel/runtime/helpers/esm/assertThisInitialized"),n("@babel/runtime/helpers/esm/defineProperty"),i.a.PureComponent,n.d(t,"importBundle",function(){return W}),n.d(t,"createRoot",function(){return S}),n.d(t,"destroyRoot",function(){return T}),n.d(t,"hydrateRoot",function(){return N}),n.d(t,"wrapSubrootElement",function(){return H}),n.d(t,"pageManifestComponents",function(){return U}),n.d(t,"restoreGraphQLResults",function(){return d.restoreGraphQLResults});var _=__WEB_CONTEXT__.pageManifest;Object(g.start)("Components Initialization"),Object(g.start)("Components Bundle Load");var w={};_.bundles.forEach(function(e){w[e]=$WP.getChunkPromise(e)}),Promise.all(Object.values(w)).then(function(){Object(g.end)("Components Bundle Load")});var k={};_.assets.forEach(function(e){k[e]=Promise.resolve(!0)}),Object(p.loadMessages)(_.messages),Object(m.loadFeatures)(_.features);var R=Object(O.initializeStore)(_.redux),A=R.getState().auth.csrfToken,B=new d.DummyCache;_.apolloCache&&B.restore(_.apolloCache);var I=Object(d.buildClient)(B,A),M=Object(f.buildUrqlClient)({csrfToken:A,ssrData:_.urqlCache});window.__APOLLO_CLIENT__=I;var W=function e(t){return t in w||(w[t]=fetch(asset_path+"/data/bundle?name=".concat(t),{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){return Object(p.loadMessages)(e.messages),Object(m.loadFeatures)(e.features),Promise.all([].concat(a()(e.css.map(function(e){return e in k||(k[e]=Object(y.importCss)(_.redux.meta.imageCdnUrl+e)),k[e]})),a()(e.js.map(function(e){return e in k||(k[e]=Object(y.importScript)(_.redux.meta.imageCdnUrl+e)),k[e]}))))}).then(function(){return $WP.getChunkPromise(t)})),w[t]};$WP.installResolver(W);var L=i.a.unstable_ConcurrentMode,$=function e(t){return Object(m.featureIsEnabled)("react_concurrent_mode")?i.a.createElement(L,null,i.a.createElement(C.a.Provider,{value:W},i.a.createElement(s.ErrorBoundary,{store:R},i.a.createElement(d.Root,{store:R,apolloClient:I,urqlClient:M},t)))):i.a.createElement(C.a.Provider,{value:W},i.a.createElement(s.ErrorBoundary,{store:R},i.a.createElement(d.Root,{store:R,apolloClient:I,urqlClient:M},t)))},z=i.a.createElement(C.a.Provider,{value:W},i.a.createElement(s.ErrorBoundary,{store:R},i.a.createElement(u.Provider,{store:R},i.a.createElement(E.Router,null,i.a.createElement(E.History,null),i.a.createElement(d.LithiumBridge,null,i.a.createElement(P.Sentry,{installer:b.defineSentry})))))),q="data-component-init",x=Object(m.featureIsEnabled)("hydrate_while_loading");Object(g.start)("Loadables"),t.default=Promise.all(_.lazyLoadedModules.filter(function(e){return!!e}).map(function(e){return $WP.getChunkEmptyPromise(e)})).finally(function(){Object(g.end)("Loadables"),Object(g.start)("Hydration"),x&&R.dispatch(Object(O.pauseRequestAction)());var e=[];return _.hydrations.forEach(function(t){var n=document.getElementById(t.id);null===n||n.getAttribute(q)||(n.setAttribute(q,q),e.push(function(){return new Promise(function(e){$WP.getChunkPromise(t.package).then(function(r){var a="Hydrate ".concat(t.package," ").concat(t.id);Object(g.start)(a),new c.ApiMonitor(R,r.default,t.props).stage(t.props),Object(l.hydrate)($(i.a.createElement(r.default,t.props)),n,function(){Object(g.end)(a),e()})})})}))}),x?Promise.all(e.map(function(e){var t=e();return t?t.then(null,function(){return null}):t})):Object(m.featureIsEnabled)("serialized_hydration_promises")?e.reduce(function(e,t){return e.finally(t)},Promise.resolve([])):Promise.all(e.map(function(e){return e()}))}).finally(function(){Object(g.end)("Hydration"),x&&R.dispatch(Object(O.resumeRequestAction)()),Object(O.storeResizeHandler)(),Object(g.start)("Render");var e=[];_.renders.forEach(function(t){var n=document.getElementById(t.id);null===n||n.getAttribute(q)||(n.setAttribute(q,q),e.push(new Promise(function(e){$WP.getChunkPromise(t.package).then(function(r){new c.ApiMonitor(R,r.default,t.props).reload();var a="Render ".concat(t.package," ").concat(t.id);Object(g.start)(a),Object(l.render)($(i.a.createElement(r.default,t.props)),n,function(){Object(g.end)(a),e()})})})))});var t=document.body,n=document.createElement("div");n.id="singletonRoot",t&&(t.appendChild(n),Object(l.render)(z,n)),Promise.all(e).finally(function(){if(Object(g.end)("Render"),Object(g.end)("Components Initialization"),Object(m.featureIsEnabled)("prod_runtime_tracking")&&"undefined"!=typeof window&&window.performance&&window.performance.getEntriesByName){var e=window.performance.getEntriesByName("components-Components Initialization-end","mark");if(e&&e.length>0){var t=e[0].startTime;null!==t&&v()({module:"runtime",action:"initialization_complete",context:Number(t).toString()})}}})});var S=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.getElementById(t);null!==a?a.getAttribute(q)||(a.setAttribute(q,q),$WP.getChunkPromise(n).then(function(e){new c.ApiMonitor(R,e.default,r).reload(),Object(l.render)($(i.a.createElement(e.default,r)),a)})):h.a.error("Unable to find DOM element with id = ".concat(t))},T=function e(t){var n=document.getElementById(t);null!==n&&Object(l.unmountComponentAtNode)(n)},N=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=document.getElementById(t);null!==a?a.getAttribute(q)||(a.setAttribute(q,q),$WP.getChunkPromise(n).then(function(e){new c.ApiMonitor(R,e.default,r).stage(r),Object(l.hydrate)($(i.a.createElement(e.default,r)),a)})):h.a.error("Unable to find DOM element with id = ".concat(t))},H=function e(t,n){var r=i.a.createElement(d.Root,{store:R,apolloClient:I,urqlClient:M},t);return n&&(r=i.a.createElement(s.ErrorBoundary,{store:R},r)),r=i.a.createElement(C.a.Provider,{value:W},r),Object(m.featureIsEnabled)("react_concurrent_mode")&&(r=i.a.createElement(L,null,r)),r},U=_.hydrations.concat(_.renders).concat(_.strictModeRoots).reduce(function(e,t){return e[t.id]=t.props,e},{});}}});
//# sourceMappingURL=platform.runtime.1557b0fb37.js.map
