($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/lithium.portals",d:["vendor-babel","vendor-react-libs"],e:["./packages/lithium/portals/portals.jsx"],x:{"./packages/lithium/portals/portals.jsx":["VirtualDOMPortalProvider","useVDOMPortal","OverlayPortal","OverlayContainer"]},m:{"./packages/lithium/portals/portals.jsx":function(e,n,t){"use strict";t.r(n);var r=t("@babel/runtime/helpers/esm/objectSpread"),u=t.n(r),o=t("@babel/runtime/helpers/esm/toConsumableArray"),a=t.n(o),c=t("@babel/runtime/helpers/esm/slicedToArray"),i=t.n(c),l=t("react"),s=function e(){return"".concat(Math.random()).substr(2)},d=l.memo(function e(n){return n.children}),f=l.createContext({mountNode:function e(){},unmountNode:function e(){}}),m=function e(n){var t=n.children,r=l.useState([]),o=i()(r,2),c=o[0],m=o[1],p=l.useRef([]).current,v=l.useMemo(function(){return{mountNode:function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{upsert:!1},r=s();t.upsert?m(function(e){var t=e.findIndex(function(e){return e.id===n.id}),o=u()({},n,{key:-1===t?r:e[t].key});return e.splice(t,-1===t?0:1,o),a()(e)}):m(function(e){return[].concat(a()(e.filter(function(e){return n.id!==e.id})),[u()({},n,{key:r})])}),p.push({id:n.id,stateChange:n.stateChange}),n.stateChange(!0)},unmountNode:function e(n){m(function(e){return e.filter(function(e){return e.id!==n})}),p.map(function(e,t){return e.id===n?t:null}).filter(function(e){return null!==e}).map(function(e){return p.splice(e,1)}).forEach(function(e){e.forEach(function(e){(0,e.stateChange)(!1)})})}}},[p]);return l.createElement(f.Provider,{value:v},l.createElement(d,null,t),c.map(function(e){var n=e.node,t=e.key,r=e.id;return l.createElement(d,{key:"VDOMPortal:".concat(t||r)},n)}))},p=t("@babel/runtime/helpers/esm/typeof"),v=t.n(p),h=function e(n){return"object"!==v()(n)||null===n||Array.isArray(n.key)?null:n.key},y=function e(n,t){var r=function e(){return l.useRef(s()).current}(),u=l.useContext(f),o=u.mountNode,c=u.unmountNode,d=l.useState(!1),m=i()(d,2),p=m[0],v=m[1],y=l.useRef(!0),b=l.useCallback(function(e){y.current&&v(e)},[]),C=l.useRef(null),P=l.useRef(null),k=l.useCallback(function(){o({node:C.current,id:r,stateChange:b})},[r,o,b]),g=l.useCallback(function(){c(r)},[r,c]),E=l.useMemo(function(){return{isOpen:p,open:k,close:g}},[p,k,g]);return l.useEffect(function(){var e=h(C.current);if(C.current=n(E),p){var t=e===h(C.current);o({node:C.current,id:r,stateChange:v},{upsert:t})}P.current=e},Array.isArray(t)?[r,p,E,o].concat(a()(t)):void 0),l.useEffect(function(){return function(){y.current=!1}},[]),E},b=t("@babel/runtime/helpers/esm/extends"),C=t.n(b),P=t("react-dom"),k=l.createContext(function(){return document&&document.body?document.body:null}),g=function e(n){var t=n.children,r=l.useRef("undefined"!=typeof document?document.createElement("div"):null),u=l.useRef(null),o=l.useCallback(function(){return r.current},[]);return l.useEffect(function(){r.current&&!r.current.parentNode&&u.current&&u.current.appendChild(r.current)},[]),l.createElement(l.Fragment,null,l.createElement(k.Provider,{value:o},t),l.createElement("div",{ref:u,dangerouslySetInnerHTML:{__html:""}}))},E=l.forwardRef(function(e,n){var t=l.useContext(k);if("undefined"==typeof document)return console.error("Attempting to render a portal on server-side! This will cause hydration mismatches. Portals should be rendered in response to an event or client callback"),null;var r=t();return r?P.createPortal(l.createElement("div",C()({},e,{ref:n})),r):null});E.displayName="OverlayPortal";var O=E;t.d(n,"VirtualDOMPortalProvider",function(){return m}),t.d(n,"useVDOMPortal",function(){return y}),t.d(n,"OverlayPortal",function(){return O}),t.d(n,"OverlayContainer",function(){return g})}}});
//# sourceMappingURL=lithium.portals.e31d027e0b.js.map