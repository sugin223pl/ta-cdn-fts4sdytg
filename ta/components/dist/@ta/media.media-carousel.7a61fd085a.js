($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/media.media-carousel",d:["vendor-babel","vendor-react-libs","vendor-common","vendor-redux-libs","@ta/events.keyboard-event-listener","@ta/events.window-resize","lithium-platform","ta-platform"],e:["./packages/media/media-carousel/media-carousel.jsx"],x:{"./packages/media/media-carousel/media-carousel.jsx":["MediaCarousel","MediaCarouselTracking"]},m:{"./node_modules/detect-passive-events/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={update:function e(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var t=!1,n=Object.defineProperty({},"passive",{get:function e(){t=!0}}),o=function e(){};window.addEventListener("testPassiveEventSupport",o,n),window.removeEventListener("testPassiveEventSupport",o,n),i.hasSupport=t}}};i.update(),t.default=i},"./node_modules/react-swipeable/lib/Swipeable.js":function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n("react"),s=n("prop-types"),a=n("./node_modules/detect-passive-events/lib/index.js").default;function r(e,t){var n=function i(e){return"changedTouches"in e?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}}(e),o=n.x,s=n.y,a=t.x-o,r=t.y-s,l=Math.abs(a),d=Math.abs(r),p=Date.now()-t.start;return{deltaX:a,deltaY:r,absX:l,absY:d,velocity:Math.sqrt(l*l+d*d)/p}}var l=function(e){function t(n,i){!function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return s.eventStart=s.eventStart.bind(s),s.eventMove=s.eventMove.bind(s),s.eventEnd=s.eventEnd.bind(s),s.mouseDown=s.mouseDown.bind(s),s.mouseMove=s.mouseMove.bind(s),s.mouseUp=s.mouseUp.bind(s),s.cleanupMouseListeners=s.cleanupMouseListeners.bind(s),s.setupMouseListeners=s.setupMouseListeners.bind(s),s.elementRef=s.elementRef.bind(s),s.setupTouchmoveEvent=s.setupTouchmoveEvent.bind(s),s.cleanupTouchmoveEvent=s.cleanupTouchmoveEvent.bind(s),s.hasPassiveSupport=a.hasSupport,s}return function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function e(){this.swipeable={x:null,y:null,swiping:!1,start:0}},t.prototype.componentDidMount=function e(){this.props.preventDefaultTouchmoveEvent&&this.setupTouchmoveEvent()},t.prototype.componentDidUpdate=function e(t){t.disabled!==this.props.disabled&&(this.cleanupMouseListeners(),this.swipeable={x:null,y:null,swiping:!1,start:0}),t.preventDefaultTouchmoveEvent&&!this.props.preventDefaultTouchmoveEvent?this.cleanupTouchmoveEvent():!t.preventDefaultTouchmoveEvent&&this.props.preventDefaultTouchmoveEvent&&this.setupTouchmoveEvent()},t.prototype.componentWillUnmount=function e(){this.cleanupMouseListeners()},t.prototype.setupTouchmoveEvent=function e(){this.element&&this.hasPassiveSupport&&this.element.addEventListener("touchmove",this.eventMove,{passive:!1})},t.prototype.setupMouseListeners=function e(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp)},t.prototype.cleanupTouchmoveEvent=function e(){this.element&&this.hasPassiveSupport&&this.element.removeEventListener("touchmove",this.eventMove,{passive:!1})},t.prototype.cleanupMouseListeners=function e(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)},t.prototype.mouseDown=function e(t){this.props.trackMouse&&"mousedown"===t.type&&("function"==typeof this.props.onMouseDown&&this.props.onMouseDown(t),this.setupMouseListeners(),this.eventStart(t))},t.prototype.mouseMove=function e(t){this.eventMove(t)},t.prototype.mouseUp=function e(t){this.cleanupMouseListeners(),this.eventEnd(t)},t.prototype.eventStart=function e(t){if(!(t.touches&&t.touches.length>1)){var n=function i(e){return"touches"in e?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}(t),o=n.x,s=n.y;this.props.stopPropagation&&t.stopPropagation(),this.swipeable={start:Date.now(),x:o,y:s,swiping:!1}}},t.prototype.eventMove=function e(t){var n=this.props,i=n.stopPropagation,o=n.delta,s=n.onSwiping,a=n.onSwipingLeft,l=n.onSwipedLeft,d=n.onSwipingRight,p=n.onSwipedRight,u=n.onSwipingUp,c=n.onSwipedUp,h=n.onSwipingDown,m=n.onSwipedDown,v=n.preventDefaultTouchmoveEvent;if(this.swipeable.x&&this.swipeable.y&&!(t.touches&&t.touches.length>1)){var f=r(t,this.swipeable);if(!(f.absX<o&&f.absY<o)||this.swipeable.swiping){i&&t.stopPropagation(),s&&s(t,f.deltaX,f.deltaY,f.absX,f.absY,f.velocity);var g=!1;f.absX>f.absY?f.deltaX>0?(a||l)&&(a&&a(t,f.absX),g=!0):(d||p)&&(d&&d(t,f.absX),g=!0):f.deltaY>0?(u||c)&&(u&&u(t,f.absY),g=!0):(h||m)&&(h&&h(t,f.absY),g=!0),this.swipeable.swiping=!0,g&&v&&t.preventDefault()}}},t.prototype.eventEnd=function e(t){var n=this.props,i=n.stopPropagation,o=n.flickThreshold,s=n.onSwiped,a=n.onSwipedLeft,l=n.onSwipedRight,d=n.onSwipedUp,p=n.onSwipedDown,u=n.onTap;if(this.swipeable.swiping){var c=r(t,this.swipeable);i&&t.stopPropagation();var h=c.velocity>o;s&&s(t,c.deltaX,c.deltaY,h,c.velocity),c.absX>c.absY?c.deltaX>0?a&&a(t,c.deltaX,h):l&&l(t,c.deltaX,h):c.deltaY>0?d&&d(t,c.deltaY,h):p&&p(t,c.deltaY,h)}else u&&u(t);this.swipeable={x:null,y:null,swiping:!1,start:0}},t.prototype.elementRef=function e(t){this.element=t,this.props.innerRef&&this.props.innerRef(t)},t.prototype.render=function e(){var t=i({},this.props);return this.props.disabled||(t.onTouchStart=this.eventStart,this.props.preventDefaultTouchmoveEvent&&this.hasPassiveSupport||(t.onTouchMove=this.eventMove),t.onTouchEnd=this.eventEnd,t.onMouseDown=this.mouseDown),t.ref=this.elementRef,delete t.onSwiped,delete t.onSwiping,delete t.onSwipingUp,delete t.onSwipingRight,delete t.onSwipingDown,delete t.onSwipingLeft,delete t.onSwipedUp,delete t.onSwipedRight,delete t.onSwipedDown,delete t.onSwipedLeft,delete t.onTap,delete t.flickThreshold,delete t.delta,delete t.preventDefaultTouchmoveEvent,delete t.stopPropagation,delete t.nodeName,delete t.children,delete t.trackMouse,delete t.disabled,delete t.innerRef,o.createElement(this.props.nodeName,t,this.props.children)},t}(o.Component);l.propTypes={onSwiped:s.func,onSwiping:s.func,onSwipingUp:s.func,onSwipingRight:s.func,onSwipingDown:s.func,onSwipingLeft:s.func,onSwipedUp:s.func,onSwipedRight:s.func,onSwipedDown:s.func,onSwipedLeft:s.func,onTap:s.func,flickThreshold:s.number,delta:s.number,preventDefaultTouchmoveEvent:s.bool,stopPropagation:s.bool,nodeName:s.string,trackMouse:s.bool,disabled:s.bool,innerRef:s.func,children:s.node},l.defaultProps={flickThreshold:.6,delta:10,preventDefaultTouchmoveEvent:!1,stopPropagation:!1,nodeName:"div",disabled:!1},e.exports=l},"./packages/media/media-carousel/media-carousel.jsx":function(e,t,n){"use strict";n.r(t);var i=n("@babel/runtime/helpers/esm/classCallCheck"),o=n.n(i),s=n("@babel/runtime/helpers/esm/createClass"),a=n.n(s),r=n("@babel/runtime/helpers/esm/possibleConstructorReturn"),l=n.n(r),d=n("@babel/runtime/helpers/esm/getPrototypeOf"),p=n.n(d),u=n("@babel/runtime/helpers/esm/inherits"),c=n.n(u),h=n("@babel/runtime/helpers/esm/assertThisInitialized"),m=n.n(h),v=n("@babel/runtime/helpers/esm/defineProperty"),f=n.n(v),g=n("react"),w=n("lodash/throttle"),y=n.n(w),S=n("lodash/debounce"),b=n.n(S),T=n("./node_modules/react-swipeable/lib/Swipeable.js"),I=n.n(T),x=n("@ta/events.keyboard-event-listener"),M=n.n(x),E=n("@ta/events.window-resize"),D=n.n(E),k=n("@ta/common.i18n"),L=n("@ta/common.classnames"),_=n.n(L),R=n("@ta/common.decode"),C=n.n(R),P=function(e){function t(e){var n;return o()(this,t),n=l()(this,p()(t).call(this,e)),f()(m()(m()(n)),"PAUSE_IFRAME_VIDEO_DATA",JSON.stringify({event:"command",func:"pauseVideo"})),f()(m()(m()(n)),"pauseVideo",function(){n.refToIframe.current.contentWindow.postMessage(n.PAUSE_IFRAME_VIDEO_DATA,"*")}),f()(m()(m()(n)),"decodeVideoUrl",function(){n.setState({decodedUrl:n.props.encodedUrl?C()(n.props.encodedUrl):""})}),f()(m()(m()(n)),"refToIframe",void 0),n.refToIframe=g.createRef(),n.state={decodedUrl:""},n}return c()(t,e),a()(t,[{key:"componentDidMount",value:function e(){this.decodeVideoUrl()}},{key:"componentDidUpdate",value:function e(){this.props.isVideoShown||this.pauseVideo()}},{key:"render",value:function e(){return g.createElement("iframe",{ref:this.refToIframe,style:{width:"100%",height:"100%"},src:this.state.decodedUrl,"data-encoded-url":this.props.encodedUrl,frameBorder:"0",allowFullScreen:!0,title:this.props.encodedUrl,allow:"autoplay"})}}]),t}(g.Component),U={imageGallery:"media-media-carousel-MediaCarousel__imageGallery--3Oq9n",imageGalleryContent:"media-media-carousel-MediaCarousel__imageGalleryContent--2OMZH",imageGallerySlide:"media-media-carousel-MediaCarousel__imageGallerySlide--3HC1k",imageGallerySlideWrapper:"media-media-carousel-MediaCarousel__imageGallerySlideWrapper--3o03a",imageGalleryNav:"media-media-carousel-MediaCarousel__imageGalleryNav--34Ex2",leftNav:"media-media-carousel-MediaCarousel__leftNav--2-W9c",rightNav:"media-media-carousel-MediaCarousel__rightNav--2CEyA",imageGallerySlides:"media-media-carousel-MediaCarousel__imageGallerySlides--1-oOj",carouselImage:"media-media-carousel-MediaCarousel__carouselImage--SYdol",isLandscape:"media-media-carousel-MediaCarousel__isLandscape--3tIc2",imageGallerySwipe:"media-media-carousel-MediaCarousel__imageGallerySwipe--3lOyh",carouselContainer:"media-media-carousel-MediaCarousel__carouselContainer--18hxq"},N=function(e){function t(e){var n;return o()(this,t),n=l()(this,p()(t).call(this,e)),f()(m()(m()(n)),"onSliding",function(){var e=n.state.isTransitioning;setTimeout(function(){e&&n.setState({isTransitioning:!e})},n.props.slideDuration+50)}),f()(m()(m()(n)),"imageGallery",void 0),f()(m()(m()(n)),"unthrottledSlideToIndex",void 0),f()(m()(m()(n)),"debounceResize",void 0),f()(m()(m()(n)),"imageGallerySlideWrapper",void 0),f()(m()(m()(n)),"slideToIndex",function(e){var t=n.state,i=t.currentIndex;if(!t.isTransitioning){var o=n.props.items.length-1,s=e;e<0?s=o:e>o&&(s=0),n.setState({previousIndex:i,currentIndex:s,isTransitioning:s!==i,offsetPercentage:0,style:{transition:"all ".concat(n.props.slideDuration,"ms ease-out")}},n.onSliding),n.props.parentHandler&&n.props.parentHandler(s)}}),f()(m()(m()(n)),"handleResize",function(){n.imageGallery&&n.setState({galleryWidth:n.imageGallery.offsetWidth})}),f()(m()(m()(n)),"handleKeyDown",function(e){switch(parseInt(e.keyCode||e.which||0,10)){case 37:n.canSlideLeft()&&n.slideLeft();break;case 39:n.canSlideRight()&&n.slideRight()}}),f()(m()(m()(n)),"handleOnSwiped",function(e,t,i,o){var s=n.state,a=s.scrollingUpDown,r=s.scrollingLeftRight;if(a&&n.setState({scrollingUpDown:!1}),r&&n.setState({scrollingLeftRight:!1}),!a){var l=t>0?1:-1;n.handleOnSwipedTo(l,o)}}),f()(m()(m()(n)),"handleSwiping",function(e,t,i,o){var s=n.state,a=s.galleryWidth,r=s.isTransitioning,l=s.scrollingUpDown,d=n.props.swipingTransitionDuration;if(n.setScrollDirection(t,i),r||l)n.setState({offsetPercentage:0});else{var p=t<0?1:-1,u=o/a*100;Math.abs(u)>=100&&(u=100);var c={transition:"transform ".concat(d,"ms ease-out")};n.setState({offsetPercentage:p*u,style:c})}}),f()(m()(m()(n)),"slideLeft",function(){n.slideToIndex(n.state.currentIndex-1)}),f()(m()(m()(n)),"slideRight",function(){n.slideToIndex(n.state.currentIndex+1)}),f()(m()(m()(n)),"isIndexInInterval",function(e,t,n){return e<=Math.max(t,n)&&e>=Math.min(t,n)}),f()(m()(m()(n)),"shouldRenderItem",function(e){return e===n.state.currentIndex||1===Math.abs(n.state.currentIndex-e)||Math.abs(n.state.currentIndex-e)===n.props.items.length-1||n.state.isTransitioning&&n.isIndexInInterval(e,n.state.currentIndex,n.state.previousIndex)}),f()(m()(m()(n)),"renderItem",function(e){var t=null;switch(e.mediaType){case"photo":t=g.createElement("img",{src:e.jumboUrl,alt:e.description,className:n.props.imageStyles||(e.landscape?U.isLandscape:"")});break;case"video":t=g.createElement(P,{encodedUrl:e.jumboUrl,isVideoShown:"video"===n.props.items[n.state.currentIndex].mediaType})}return g.createElement("div",{className:U.carouselImage},t)}),n.state={currentIndex:e.startIndex,previousIndex:e.startIndex-1,offsetPercentage:0,galleryWidth:0},n.unthrottledSlideToIndex=n.slideToIndex,n.slideToIndex=y()(n.unthrottledSlideToIndex,n.props.slideDuration,{trailing:!1}),n.debounceResize=b()(n.handleResize,500),n}return c()(t,e),a()(t,[{key:"componentDidMount",value:function e(){this.debounceResize()}},{key:"componentDidUpdate",value:function e(t,n){n.currentIndex!==this.state.currentIndex&&this.props.onSlide&&this.props.onSlide(this.state.currentIndex),t.slideDuration!==this.props.slideDuration&&(this.slideToIndex=y()(this.unthrottledSlideToIndex,this.props.slideDuration,{trailing:!1})),t.startIndex!==this.props.startIndex&&this.slideToIndex(this.props.startIndex)}},{key:"getTranslateXForTwoSlide",value:function e(t){var n=this.state,i=n.currentIndex,o=n.offsetPercentage,s=n.previousIndex,a=-100*i+100*t+o,r="";return o>0?r="left":o<0&&(r="right"),0===i&&1===t&&o>0?a=-100+o:1===i&&0===t&&o<0&&(a=100+o),i!==s?0===s&&0===t&&0===o&&"left"===r?a=100:1===s&&1===t&&0===o&&"right"===r&&(a=-100):0===i&&1===t&&0===o&&"left"===r?a=-100:1===i&&0===t&&0===o&&"right"===r&&(a=100),a}},{key:"setScrollDirection",value:function e(t,n){var i=this.state,o=i.scrollingUpDown,s=i.scrollingLeftRight,a=Math.abs(t);Math.abs(n)>a&&!o&&!s?this.setState({scrollingUpDown:!0}):s||o||this.setState({scrollingLeftRight:!0})}},{key:"getSlideStyle",value:function e(t){var n=this.state,i=n.currentIndex,o=n.offsetPercentage,s=this.props,a=s.infinite,r=s.items,l=s.useTranslate3D,d=-100*i,p=r.length-1,u=d+100*t+o;a&&r.length>2&&(0===i&&t===p?u=-100+o:i===p&&0===t&&(u=100+o)),a&&2===r.length&&(u=this.getTranslateXForTwoSlide(t));var c="translate(".concat(u,"%, 0)");return l&&(c="translate3d(".concat(u,"%, 0, 0)")),{WebkitTransform:c,MozTransform:c,msTransform:c,OTransform:c,transform:c}}},{key:"ignoreIsTransitioning",value:function e(){var t=this.state,n=t.previousIndex,i=t.currentIndex,o=this.props.items.length-1;return Math.abs(n-i)>1&&!(0===n&&i===o)&&!(n===o&&0===i)}},{key:"isFirstOrLastSlide",value:function e(t){return t===this.props.items.length-1||0===t}},{key:"shouldPushSlideOnInfiniteMode",value:function e(t){return!this.slideIsTransitioning(t)||this.ignoreIsTransitioning()&&!this.isFirstOrLastSlide(t)}},{key:"slideIsTransitioning",value:function e(t){var n=this.state,i=n.isTransitioning,o=n.previousIndex,s=n.currentIndex;return i&&!(t===o||t===s)}},{key:"sufficientSwipeOffset",value:function e(){return Math.abs(this.state.offsetPercentage)>this.props.swipeThreshold}},{key:"canNavigate",value:function e(){return this.props.items.length>=2}},{key:"canSlideLeft",value:function e(){return this.props.infinite||this.state.currentIndex>0}},{key:"canSlideRight",value:function e(){return this.props.infinite||this.state.currentIndex<this.props.items.length-1}},{key:"handleOnSwipedTo",value:function e(t,n){var i=this.state,o=i.currentIndex,s=i.isTransitioning,a=o;!this.sufficientSwipeOffset()&&!n||s||(a+=t),t<0?this.canSlideLeft()||(a=o):this.canSlideRight()||(a=o),this.unthrottledSlideToIndex(a);var r=this.props.tracking;r&&(t<0&&r.onSwipeLeft?r.onSwipeLeft():t>0&&r.onSwipeRight&&r.onSwipeRight())}},{key:"render",value:function e(){var t=this,n=this.state.scrollingLeftRight,i=this.props,o=i.infinite,s=i.preventDefaultTouchmoveEvent,a=this.slideLeft,r=this.slideRight,l=[],d=0;this.props.items.forEach(function(e,n){var i=t.getSlideStyle(n),s=t.props.additionalSlideStyles||"",a=g.createElement("div",{key:d,className:_()(U.imageGallerySlide,s),style:Object.assign(i,t.state.style),onClick:t.props.onClick,onTouchMove:t.props.onTouchMove,onTouchEnd:t.props.onTouchEnd,onTouchStart:t.props.onTouchStart,onMouseLeave:t.props.onMouseLeave,role:t.props.onClick&&"button"},t.shouldRenderItem(n)?t.renderItem(e):null);(o&&t.shouldPushSlideOnInfiniteMode(n)||!o)&&l.push(a),d+=1});var p=g.createElement("div",{ref:function e(n){return t.imageGallerySlideWrapper=n,n},className:"".concat(U.imageGallerySlideWrapper)},this.canNavigate()?g.createElement("div",{className:U.carouselContainer,key:"navigation"},this.props.renderLeftNav(a,!this.canSlideLeft()),g.createElement(I.a,{className:U.imageGallerySwipe,key:"swipeable",delta:0,flickThreshold:this.props.flickThreshold,onSwiping:this.handleSwiping,onSwiped:this.handleOnSwiped,stopPropagation:this.props.stopPropagation,preventDefaultTouchmoveEvent:s||n},g.createElement("div",{className:U.imageGallerySlides},l)),this.props.renderRightNav(r,!this.canSlideRight())):g.createElement("div",{className:U.imageGallerySlides},l));return g.createElement("div",{ref:function e(n){return t.imageGallery=n,n},className:_()(U.imageGallery,this.props.additionalClass||""),"aria-live":"polite"},g.createElement("div",{className:U.imageGalleryContent},p,!this.props.disableArrowKeys&&g.createElement(M.a,{keyName:["ArrowLeft","ArrowRight","Left","Right"],callback:this.handleKeyDown}),g.createElement(D.a,{callback:this.debounceResize,throttle:50})))}}]),t}(g.Component);f()(N,"defaultProps",{items:[],infinite:!0,disableArrowKeys:!1,useTranslate3D:!0,preventDefaultTouchmoveEvent:!1,flickThreshold:.4,stopPropagation:!1,indexSeparator:" / ",startIndex:0,slideDuration:450,swipingTransitionDuration:0,slideInterval:3e3,swipeThreshold:30,additionalClass:"",renderLeftNav:function e(t,n){return g.createElement("button",{type:"button",className:_()(U.imageGalleryNav,U.leftNav,"ui_icon","single-chevron-left"),disabled:n,onClick:t,"aria-label":Object(k.localize)("vr_aria_previous_photo")})},renderRightNav:function e(t,n){return g.createElement("button",{type:"button",className:_()(U.imageGalleryNav,U.rightNav,"ui_icon","single-chevron-right"),disabled:n,onClick:t,"aria-label":Object(k.localize)("vr_aria_next_photo")})}});var O=n("./packages/media/media-carousel/types.jsx");n.d(t,"MediaCarousel",function(){return N}),n.d(t,"MediaCarouselTracking",function(){return O.MediaCarouselTracking})},"./packages/media/media-carousel/types.jsx":function(e,t){}}});
//# sourceMappingURL=media.media-carousel.7a61fd085a.js.map