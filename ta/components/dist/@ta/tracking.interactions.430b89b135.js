($WP="undefined"!=typeof $WP?$WP:[]).push({id:"@ta/tracking.interactions",d:["vendor-babel","vendor-react-libs","vendor-redux-libs","vendor-urql","ta-platform","@ta/common.localstorage"],e:["./packages/tracking/interactions/interactions.jsx"],x:{"./packages/tracking/interactions/interactions.jsx":["InteractionLogger","TrackingNamespaceContext","ItemIdContext","FeedSectionIdContext","HomeTrackingContext","ProfileTrackingContext","InboxTrackingContext","SearchTrackingContext","OnboardingTrackingContext","UgcDetailTrackingContext","FollowPlacementContext","SocialHotelsTrackingContext","FlightsSearchResultsContext","FlightsGoogleOneTapClickContext","ItineraryContext","CrossSiteClickContext","SavingsTipsContext","RecommendedFolloweesImpressionIdContext","MixerImpressionContext","FollowTabTypeContext","GlobalNavTrackingContext","LogInteractionV4","CrossSiteClickInteractionLogger","FareCardInteractionLogger"]},m:{"./packages/tracking/interactions/interactions.jsx":function(e,n,t){"use strict";t.r(n);var r=t("@babel/runtime/helpers/esm/slicedToArray"),a=t.n(r),i=t("@babel/runtime/helpers/esm/objectSpread"),o=t.n(i),c=t("react"),l=t("react-redux"),u=t("urql"),s=t("@ta/common.decode"),d=t.n(s),m=t("@ta/common.localstorage"),f=t.n(m),C=t("@ta/common.logging"),k=t.n(C),v=c.createContext(null),g=c.createContext(null),p=c.createContext({itemId:""}),x=c.createContext(null),b=c.createContext(null),h=c.createContext(null),w=c.createContext(null),I=c.createContext(null),T=c.createContext(null),E=c.createContext(null),y=c.createContext(null),S=c.createContext(null),N=c.createContext(null),D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interactions"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionWithTimestampInput"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interactions"},value:{kind:"Variable",name:{kind:"Name",value:"interactions"}}},{kind:"Argument",name:{kind:"Name",value:"clientRequestTimestamp"},value:{kind:"Variable",name:{kind:"Name",value:"clientRequestTimestamp"}}}],directives:[]}]}}],loc:{start:0,end:211}};D.loc.source={body:"2f6863dd8a7e"};var F=D,R=c.createContext(null),O=c.createContext(null),j=c.createContext(null),M=c.createContext(null),L=c.createContext(null),U=c.createContext(null),P=c.createContext(null),H=function e(n){var t=f.a.get("interactionData");t&&(n({interactions:t,clientRequestTimestamp:(new Date).getTime()}),f.a.remove("interactionData"))},V=function e(n,t,r){!function e(n){var t=f.a.get("interactionData");t||(t=[]);var r={eventTimestampMsClient:(new Date).getTime(),interaction:n};t.push(r),f.a.set("interactionData",t)}(t),function e(n){if(!n)return!1;var t=n.target,r=n.currentTarget;if(t&&r&&t instanceof HTMLElement){var a=t,i=!1;do{if(a instanceof HTMLElement&&a.dataset.encodedUrl){var o=d()(a.dataset.encodedUrl),c=document.createElement("a");c.href=o,a.parentElement instanceof HTMLElement&&(c.style.display="none",a.parentElement.appendChild(c)),a=c}if(a instanceof HTMLAnchorElement){var l=a;if(window&&window.location&&window.location.hostname&&window.location.hostname===l.hostname)return!0}i=a===r||i,a=a.parentElement}while(a&&!i)}return!1}(n)||H(r)},A=Object(l.connect)(function(e){return{loggedInUserId:e.auth.loggedInUserId,isReadonlyMode:e.meta.readonlyMode}})(function e(n){var t=Object(u.useMutation)(F),r=a()(t,2)[1];return c.useEffect(function(){n.isReadonlyMode||H(r)}),n.isReadonlyMode?n.children(function(){}):c.createElement(x.Consumer,null,function(e){return"mixer"===e?function e(n,t){var r=t.children;return c.createElement(v.Consumer,null,function(e){return c.createElement(g.Consumer,null,function(t){return c.createElement(p.Consumer,null,function(a){return r(function r(i,o,c){var l=c||{},u={};switch(o){case"delete":case"linkedPoiScroll":case"overflowMenuClick":case"report":case"seeAll":case"shelfScroll":case"untag":case"untagConfirm":case"untagCancel":u[o]={feedSectionId:t};break;case"linkedPhotoClick":u[o]={feedSectionId:t},Object.assign(u[o],l);break;case"linkedPoiClick":u[o]={feedSectionId:t,placement:"HEADER"},Object.assign(u[o],l);break;case"feedClick":case"helpful":case"repost":case"share":case"unhelpful":case"follow":case"unfollow":case"userClick":case"save":case"dismiss":case"userReferenceClick":case"linkReferenceClick":case"linkedSnippetClick":case"batchGalleryClick":case"batchGalleryScroll":u[o]={feedSectionId:t,itemId:a.itemId},Object.assign(u[o],l);break;case"showMore":u[o]={mixerImpressionId:e},Object.assign(u[o],l);break;default:var s=o||"undefined";k.a.error("Unknown mixer interaction type: ".concat(s))}V(i,{mixer:u},n)})})})})}(r,n):"home"===e?function e(n,t){var r=t.children;return c.createElement(b.Consumer,null,function(e){return c.createElement(T.Consumer,null,function(t){return r(function r(a,i,c){var l=c||{},u={};u["unfollow"===i?"unFollow":i]=o()({},e,l,t),V(a,{home:u},n)})})})}(r,n):"profile"===e?function e(n,t){var r=t.children;return c.createElement(h.Consumer,null,function(e){return c.createElement(T.Consumer,null,function(t){return r(function r(a,i,c){var l=c||{},u={};u["unfollow"===i?"unFollow":i]=o()({},e,l,t),V(a,{profile:u},n)})})})}(r,n):"onboarding"===e?function e(n,t){var r=t.children;return c.createElement(E.Consumer,null,function(e){return r(function t(r,a,i){var c=i||{},l={};l[a]=o()({},c,e),V(r,{onboarding:l},n)})})}(r,n):"inbox"===e?function e(n,t){var r=t.children;return c.createElement(N.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};switch(a){case"follow":case"unfollow":c[a]={},Object.assign(c[a],o),Object.assign(c[a],e);break;default:var l=a||"undefined";k.a.error("Unknown or not set up inbox interactionType: ".concat(l))}V(r,{inbox:c},n)})})}(r,n):"search"===e?function e(n,t){var r=t.children;return c.createElement(w.Consumer,null,function(e){return r(function t(r,a,i){var o=i||{},c={};switch(a){case"follow":case"unfollow":c[a]={},Object.assign(c[a],o),Object.assign(c[a],e);break;default:var l=a||"undefined";k.a.error("Unknown or not set up search interactionType: ".concat(l))}V(r,{search:c},n)})})}(r,n):"ugcDetail"===e?function e(n,t){var r=t.children,a=t.loggedInUserId;return c.createElement(I.Consumer,null,function(e){return r(function t(r,i,c){var l=c||{},u=a?{actorUserId:a}:{},s={};s["feedClick"===i?"ugcClick":i]=o()({},e,l,u),V(r,{ugcDetail:s},n)})})}(r,n):"hotelReviewServlet"===e?function e(n,t,r){var a=t.children;return c.createElement(y.Consumer,null,function(e){return a(function t(a,i,c){var l=c||{},u={};u[i]=o()({},l,e);var s={};s[r]=u,V(a,s,n)})})}(r,n,e):"flightsResults"===e?function e(n,t,r){var a=t.children;return c.createElement(j.Consumer,null,function(e){return c.createElement(M.Consumer,null,function(t){return c.createElement(L.Consumer,null,function(i){return a(function a(c,l,u){var s=u||{},d={};switch(l){case"filter":case"sort":d[l]=o()({},s,e);break;case"firstClick":case"viewDealClick":case"viewDealPersistClick":case"secondClickBreadCrumb":case"secondClickTabDetails":case"secondClickTabReviews":case"seatMapClick":case"airlineReviewExpand":case"airlineReviewClick":case"viewDealsExpand":case"amenitiesHover":case"segmentFilter":case"flyScoreHover":case"brandedFareHover":case"selfTransferHover":case"comboFareHover":d[l]=o()({},s,t,e);break;case"savingsTipClick":case"savingsTipExpand":d[l]=o()({},s,i,{searchId:(null==e?void 0:e.searchId)||""});break;default:var m=l||"undefined";k.a.error("Unknown or not set up search interactionType: ".concat(m))}var f={};f[r]=d,V(c,f,n)})})})})}(r,n,e):"flights"===e?function e(n,t,r){var a=t.children;return c.createElement(U.Consumer,null,function(e){return c.createElement(M.Consumer,null,function(t){return c.createElement(P.Consumer,null,function(i){return a(function a(c,l,u){var s=u||{},d={};switch(l){case"fareCardClick":d[l]=o()({},s,t);break;case"crossSiteClick":d[l]=o()({},s,e);break;case"googleOneTapClick":d[l]=o()({},s,i);break;default:var m=l||"undefined";k.a.error("Unknown or not set up search interactionType: ".concat(m))}var f={};f[r]=d,V(c,f,n)})})})})}(r,n,e):"globalNav"===e?function e(n,t){var r=t.children;return c.createElement(R.Consumer,null,function(e){return r(function t(r,a,i){var c=i||{},l={};l[a]=o()({},c,e),V(r,{globalNav:l},n)})})}(r,n):"contentUploader"===e?function e(n,t){var r=t.children;return c.createElement(O.Consumer,null,function(e){return r(function t(r,a,i){var c=i||{},l={};l[a]=o()({},c,e),V(r,{contentUploader:l},n)})})}(r,n):"ownerNewsFeed"===e?function e(n,t){var r=t.children;return c.createElement(v.Consumer,null,function(e){return c.createElement(g.Consumer,null,function(t){return c.createElement(p.Consumer,null,function(a){return r(function r(i,o,c){var l=c||{},u={};switch(o){case"feedClick":case"howToRespondClick":case"makeFavoriteReviewClick":case"reportReviewClick":case"respondDirectMessageClick":case"respondReviewClick":u[o]={feedSectionId:t,itemId:a.itemId},Object.assign(u[o],l);break;case"listingPerformanceClick":case"adsPerformanceClick":u[o]={feedSectionId:t},Object.assign(u[o],l);break;case"ownersClick":case"managePhotosClick":case"restaurantReviewClick":case"managementCenterClick":case"adsManagerClick":u[o]={},Object.assign(u[o],l);break;case"showMore":u[o]={mixerImpressionId:e},Object.assign(u[o],l);break;default:k.a.error("Unknown ownerNewsFeed interaction type: ".concat(o))}V(i,{mixer:u},n)})})})})}(r,n):"restaurants"===e?function e(n,t,r){var a=t.children;return c.createElement(S.Consumer,null,function(e){return a(function t(a,i,c){var l=c||{},u={};u[i]=o()({},l,e);var s={};s[r]=u,V(a,s,n)})})}(r,n,e):n.children(function(){})})}),q=c.createContext(null),G=c.createContext(null),W={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"LogInteractionV4"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"interaction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"InteractionV4Input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logInteractionV4"},arguments:[{kind:"Argument",name:{kind:"Name",value:"interaction"},value:{kind:"Variable",name:{kind:"Name",value:"interaction"}}}],directives:[]}]}}],loc:{start:0,end:111}};W.loc.source={body:"15da4aa6d267"};var $=W,B=function e(n){var t=n.children;return c.createElement(A,null,function(e){return t(function n(t,r){e(t,r)})})},z=function e(n){var t=n.children;return c.createElement(x.Provider,{value:"flights"},c.createElement(A,null,function(e){return t(function n(t,r,a,i,o){e(t,r,{fareCardImpressionId:a,pageviewId:i,sessionId:o})})}))};t.d(n,"InteractionLogger",function(){return A}),t.d(n,"TrackingNamespaceContext",function(){return x}),t.d(n,"ItemIdContext",function(){return p}),t.d(n,"FeedSectionIdContext",function(){return g}),t.d(n,"HomeTrackingContext",function(){return b}),t.d(n,"ProfileTrackingContext",function(){return h}),t.d(n,"InboxTrackingContext",function(){return N}),t.d(n,"SearchTrackingContext",function(){return w}),t.d(n,"OnboardingTrackingContext",function(){return E}),t.d(n,"UgcDetailTrackingContext",function(){return I}),t.d(n,"FollowPlacementContext",function(){return q}),t.d(n,"SocialHotelsTrackingContext",function(){return y}),t.d(n,"FlightsSearchResultsContext",function(){return j}),t.d(n,"FlightsGoogleOneTapClickContext",function(){return P}),t.d(n,"ItineraryContext",function(){return M}),t.d(n,"CrossSiteClickContext",function(){return U}),t.d(n,"SavingsTipsContext",function(){return L}),t.d(n,"RecommendedFolloweesImpressionIdContext",function(){return T}),t.d(n,"MixerImpressionContext",function(){return v}),t.d(n,"FollowTabTypeContext",function(){return G}),t.d(n,"GlobalNavTrackingContext",function(){return R}),t.d(n,"LogInteractionV4",function(){return $}),t.d(n,"CrossSiteClickInteractionLogger",function(){return B}),t.d(n,"FareCardInteractionLogger",function(){return z})}}});
//# sourceMappingURL=tracking.interactions.430b89b135.js.map